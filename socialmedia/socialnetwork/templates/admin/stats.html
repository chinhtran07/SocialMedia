{% extends 'admin/base_site.html' %}{% block content %}<form id="myForm" method="get" onsubmit="">    <label for="object">Đối tượng thống kê:</label>    <select name="object" id="object" onchange="changePeriod()">        <option value="users">Người dùng</option>        <option value="posts">Bài viết</option>    </select>    <label for="period">Thống kê theo:</label>    <select name="period" id="period" onchange="changePeriod()">        <option value="year">Năm</option>        <option value="month">Tháng</option>        <option value="quarter">Quý</option>    </select>    <div id="year" style="display: none">        <label for="yearInput">Nhập năm:</label>        <input type="text" name="year" id="yearInput" value="">    </div>    <input type="submit" value="Thống kê"></form><ul>    {% if period == 'year' %}    {% for c in stats %}    <li><strong>Năm {{c.year}}</strong> : <strong>{{c.count}}</strong></li>    {% endfor %}    {% elif period == 'month' %}    {% for c in stats %}    <li><strong>Tháng {{c.month}}</strong> : <strong>{{c.count}}</strong></li>    {% endfor %}    {% else %}    {% for c in stats %}    <li><strong>Quý {{c.quarter}}</strong> : <strong>{{c.count}}</strong></li>    {% endfor %}    {% endif %}</ul><canvas id="myChart"></canvas><script src="https://cdn.jsdelivr.net/npm/chart.js"></script><script>    function changePeriod() {        let periodSelect = document.getElementById("period");        let yearInput = document.getElementById("year");        if (periodSelect.value === "year") {            yearInput.style.display = "none";            yearInput.value = ""        } else {            yearInput.style.display = "inline-block";        }    }    let labels = [];    let values = [];    let period = '{{ period }}'    {% if period == 'year' %}    {% for c in stats %}    values.push({{ c.count }})    labels.push('{{ c.year }}')    {% endfor %}    {% elif period == 'month' %}    {% for c in stats %}    values.push({{ c.count }})    labels.push('{{ c.month }}')    {% endfor %}    {% else %}    {% for c in stats %}    values.push({{ c.count }})    labels.push('{{ c.quarter }}')    {% endfor %}    {% endif %}    window.onload = () => {        const ctx = document.getElementById('myChart');      new Chart(ctx, {        type: 'bar',        data: {          labels: labels,          datasets: [{            label: period,            data: values,            borderWidth: 1,            backgroundColor: [              'rgb(255, 99, 132)',              'rgb(54, 162, 235)',              'rgb(255, 205, 86)'            ]          }]        },        options: {          scales: {            y: {              beginAtZero: true            }          }        }      });    }</script>{% endblock %}