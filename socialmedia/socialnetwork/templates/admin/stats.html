{% extends 'admin/base_site.html' %}{% block content %}<form>    <table>        <tr>            <td>                <label for="field">Đối tượng thống kê:</label>                 <select id="field" onchange="changePeriod()">                    <option value="users">Người dùng</option>                    <option value="posts">Bài vết</option>                </select>            </td>            <td>                <label for="period">Thống kê theo:</label>                <select id="period" onchange="changePeriod()">                    <option value="year">Năm</option>                    <option value="month">Tháng</option>                    <option value="quarter">Quý</option>                </select>            </td>            <td id="yearInput" style="display: none">                <label for="year">Nhập năm:</label>                <input type="text" placeholder="year" id="year" onchange="changePeriod()">            </td>        </tr>    </table></form><canvas id="myChart"></canvas><script src="https://cdn.jsdelivr.net/npm/chart.js"></script><script>    function changePeriod() {        var periodSelect = document.getElementById("period");        var yearInput = document.getElementById("yearInput");        if (periodSelect.value === "year") {            yearInput.style.display = "none";        } else {            yearInput.style.display = "block";        }        visualizeStatistics();    }    async function visualizeStatistics() {        const periodSelect = document.getElementById("period");        const yearInput = document.getElementById("year");        const period = periodSelect.value;        const year = period === "year" ? yearInput.value : null;        try {            const response = await fetch(`admin/stats/?type=${selectedType}&period=${period}&year=${year}`);            const data = await response.json();            // Process the data and create a Chart.js chart            const labels = data.map(entry => entry[period]);  // Assuming period is returned in the data            const counts = data.map(entry => entry.count);            const ctx = document.getElementById('myChart').getContext('2d');            const chart = new Chart(ctx, {                type: 'bar',                data: {                    labels: labels,                    datasets: [{                        label: `${selectedType} Creation Count`,                        data: counts,                        backgroundColor: 'rgba(75, 192, 192, 0.2)',                        borderColor: 'rgba(75, 192, 192, 1)',                        borderWidth: 1                    }]                },                options: {                    scales: {                        y: {                            beginAtZero: true                        }                    }                }            });        } catch (error) {            console.error(`Error fetching or visualizing ${selectedType} statistics:`, error);        }    }    // Call the function when the page loads    window.onload = visualizeStatistics;</script>{% endblock %}